# 综合实验七 - PCA主成分分析 任务清单

## 一、实验目的及要求
- 掌握 PCA 原理
- 学会将高维数据投影到低维空间（2D或3D），同时保留尽可能多的方差信息
- 可视化原始数据和降维后的数据，直观理解降维效果
- 学会根据累积方差解释比例选择合适的主成分数

## 二、实验环境
- Python (Anaconda) 或 Matlab

## 三、核心任务清单

### 任务1：数据加载与预处理
- [ ] 从.mat文件中加载训练数据 (X_train_pca.mat, y_train_pca.mat)
- [ ] 从.mat文件中加载测试数据 (X_test_pca.mat, y_test_pca.mat)
- [ ] 检查数据形状和维度
- [ ] 数据标准化/归一化处理（PCA前的必要步骤）

### 任务2：PCA算法实现
- [ ] 计算训练数据的均值，并中心化数据
- [ ] 计算协方差矩阵
- [ ] 计算协方差矩阵的特征值和特征向量
- [ ] 按特征值大小排序特征向量
- [ ] 计算方差解释比例（Explained Variance Ratio）
- [ ] 计算累积方差解释比例
- [ ] 选择合适的主成分数量（保留90%、95%、99%方差）

### 任务3：数据降维
- [ ] 将训练数据投影到前k个主成分上（降维到2D）
- [ ] 将测试数据投影到相同的主成分空间（使用训练集的均值和主成分）
- [ ] 验证降维后的数据形状

**重要提示**：测试集必须使用训练集学习到的参数（均值和主成分方向）进行降维，不能单独对测试集做PCA！

### 任务4：数据可视化
- [ ] 绘制累积方差解释比例曲线（选择主成分数量的依据）
- [ ] 可视化原始高维数据的前两个特征（了解原始数据分布）
- [ ] 可视化降维到2D后的数据分布
  - 训练集和测试集同时展示在一张图上
  - 使用不同颜色标记不同类别（基于y标签）
  - 使用不同标记形状区分训练集(实心圆)和测试集(空心圆/叉号)
  - 添加清晰的图例说明（类别 + 训练/测试）
- [ ] 对比原始数据（前2维）和降维后数据的可视化效果

### 任务5：结果分析与验证
- [ ] 输出各主成分的方差解释比例
- [ ] 分析不同主成分数量对降维效果的影响
- [ ] 可选：使用降维后的数据训练简单分类器，验证降维后信息保留程度
- [ ] 保存可视化结果图像

### 任务6：代码优化与文档
- [ ] 添加详细的代码注释
- [ ] 编写函数封装PCA各步骤
- [ ] 创建main.py主程序文件
- [ ] 编写README.md说明文档（包含运行方法、参数说明等）

### 任务7：实验报告撰写
- [ ] 完成"实验原理、步骤、程序代码及注释"部分
- [ ] 插入可视化结果图像
- [ ] 分析实验结果
- [ ] 撰写实验小结（心得体会、思考和建议）

## 四、技术要点

### PCA算法步骤
1. 数据中心化：X_centered = X - mean(X)
2. 计算协方差矩阵：C = (X_centered^T @ X_centered) / (n-1)
3. 特征分解：eigenvalues, eigenvectors = eig(C)
4. 排序：按eigenvalues降序排列eigenvectors
5. 选择主成分：取前k个eigenvectors
6. 投影：X_reduced = X_centered @ eigenvectors[:, :k]

### 可视化建议
- 使用matplotlib的scatter plot绘制2D散点图
- 使用不同颜色区分不同类别标签，配色方案优雅美观（推荐使用seaborn调色板）
- 使用不同marker样式区分训练集和测试集（如：'o' vs 'x'，实心 vs 空心）
- 添加图例、坐标轴标签、标题等
- 直接保存图像，不使用plt.show()
- 保存高分辨率图像（至少300 DPI）

### PCA重构误差说明
**PCA重构**是指用降维后的数据恢复到原始维度：
```
X_reconstructed = X_reduced @ eigenvectors[:, :k].T + mean
重构误差 = ||X_original - X_reconstructed||^2
```

**与累积方差贡献率的关系**：
- 累积方差贡献率：衡量降维后**保留了多少信息**（越高越好，如95%表示保留了95%的方差）
- 重构误差：衡量降维后**丢失了多少信息**（越低越好，表示重构越接近原始数据）
- 两者是互补的：累积方差贡献率高 ↔ 重构误差低
- 累积方差贡献率更直观，实际中用得更多

## 五、预期输出文件
- **main.py** - 主程序代码
- **pca_variance_explained.png** - 方差解释比例图
- **pca_2d_visualization.png** - 2D降维可视化（训练集+测试集）
- **README.md** - 实验报告
  - 实验原理（主要公式：协方差矩阵、特征分解、投影等）
  - 实验步骤（数据加载→PCA实现→降维→可视化）
  - 实验结果（插入可视化图像）
  - 心得体会（口语化的思考和建议，如：PCA为什么有用？训练集和测试集如何正确使用？降维会损失哪些信息？等）